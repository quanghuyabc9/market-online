{{#section 'css'}}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link rel="stylesheet" href="/assets/fontawesome/css/all.css" />
{{/section}}

{{#section 'javascript'}}
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
{{/section}}

<div class="container-fluid">
    <div class="row bg-dark">
        <div class="col-1">

        </div>
        <div class="col-10">
            {{>header-buyer}}
        </div>
        <div class="col-1">

        </div>
    </div>
    <div class="row" style="background-color: #f5f5f5;">
        <div class="col-1">

        </div>
        <div class="col-10">
            <div class="row mt-4 ml-1">
                <h5>Giỏ hàng</h5>
            </div>
            <div class="row mt-2 ml-1">
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">Sản phẩm</th>
                            <th scope="col">Đơn giá</th>
                            <th scope="col">Số lượng</th>
                            <th scope="col">Số tiền</th>
                            <th scope="col">Thao tác</th>
                        </tr>
                    </thead>
                    <tbody class="mt-3">
                        {{#each cartDetails}}
                        <tr class="bg-white">
                            <td style="width:400px;overflow: hidden">
                                <div class="row">
                                    <div class="col-4">
                                        <img src="/assets/photo-storage/{{{this.san_pham.hinh_anh}}}"
                                            style="width: 100px" alt="...">
                                    </div>
                                    <div class="col-6" style="margin-top: auto;margin-bottom: auto;">
                                        {{{this.san_pham.ten_san_pham}}}
                                    </div>
                                </div>
                            </td>
                            <td class="align-middle">{{{productPrice this.san_pham.gia_tien}}}</td>
                            <td class="align-middle">
                                {{!-- <button type="button" onclick="
                                var xhr = new XMLHttpRequest();
                                xhr.open(" POST", "/buyer/update/decrease-quality-cart-detail" , true);
                                    xhr.setRequestHeader('Content-Type', 'application/json' ); xhr.send(JSON.stringify({
                                    cartDetailId : {{{this.ma_so}}})); "><i class=" fas fa-minus"></i>
                                </button> --}}
                                {{{this.so_luong}}}
                                {{!-- <button type="button" onclick="
                                var xhr = new XMLHttpRequest();
                                xhr.open(" POST", "/buyer/update/increase-quality-cart-detail" , true);
                                    xhr.setRequestHeader('Content-Type', 'application/json' ); xhr.send(JSON.stringify({
                                    cartDetailId : {{{this.ma_so}}} )); ">
                                    <i class=" fas fa-plus"></i></i>
                                </button> --}}
                            </td>
                            <td class="align-middle">{{{productPrice this.so_tien}}}</td>
                            <td style="width:100px;overflow: hidden;">
                                <form role="form" action="/buyer/update/delete-from-cart" method="post">
                                    <input type="number" value="{{{this.ma_so}}}" name="cartDetailId" class="invisible" />
                                    <button type="submit" class="btn btn-outline-dark">Xóa</button>
                                </form>
                            </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
             <div class="row mt-4 ml-1 justify-content-end">
                <h5 class = "text-danger">Tổng tiền: {{{productPrice totalPrice}}}</h5>       
            </div>
            <div class="row mt-4 ml-1 justify-content-end">
                <a href = "/buyer/cart-payment" type="button" class="btn btn-danger ml-4 mb-4 text-light">Thanh toán</a>
            </div>
        </div>
        <div class="col-1">

        </div>
    </div>
    <div class="row">
        <div class="col-1">

        </div>
        <div class="col-10">
            {{>footer}}
        </div>
        <div class="col-1">

        </div>
    </div>
</div>